<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Password Strength Demo</title>
    <style>
        /* Add styling here */
        body {
            font-family: Arial, sans-serif;
            margin: 40px;
        }
        input {
            padding: 10px;
            font-size: 16px;
            margin-bottom: 10px;
            width: 100%;
            max-width: 300px;
        }
        p {
            font-size: 18px;
        }

    </style>
</head>
<body>
    <h1>Password Strength Demo</h1>
    <form onsubmit="updateStrength()">
        <input type="password" id="password" placeholder="Enter your password" >
        <input type="text" id="password-language" placeholder="Enter the language of your password">
        <label for="case-sensitive-input">Is the language case sensitive?</label>
        <select id="case-sensitive-input" name="case-sensitive-input">
            <option value="true">True</option>
            <option value="false">False</option>
        </select>
        <button type="submit">Check Strength</button>
    </form>

    <p id="strength"></p>
    <script>
        function checkStrength(password, language, caseSensitive, minLength, maxLength){
            
            var passwordReview = {
                strength: "",
                suggestions: [],
            }
            var totalIfCases = 0;
            var passwordStrengthCount = 0;
            const regex = new RegExp(`^.{${minLength},${maxLength}}$`);
            const regexSplCharacters = /[\s\p{P}\p{S}\p{So}]/gu;
            if ((regex).test(password)){
                passwordStrengthCount ++;
                totalIfCases ++;
            } else {
                passwordReview.suggestions.push(`Password should contain minimum of ${minLength} characters and maximum of ${maxLength} characters`);
                totalIfCases ++;
            }
            if (caseSensitive === true){
                // Matches uppercase letters
                if ((/\p{Lu}/u).test(password)){
                    passwordStrengthCount ++;
                    totalIfCases ++;
                } else {
                    passwordReview.suggestions.push("Password should contain atleast 1 capital letter");
                    totalIfCases ++;
                }
                // Matches lowercase letters
                if ((/\p{Ll}/u).test(password)){
                    passwordStrengthCount ++;
                    totalIfCases ++;
                } else {
                    passwordReview.suggestions.push("Password should contain atleast 1 small letter");
                    totalIfCases ++;
                }
            } else {
                if ((/\p{L}/u).test(password)){
                    passwordStrengthCount ++;
                    totalIfCases ++;
                } else {
                    passwordReview.suggestions.push("Password should contain atleast 1 letter");
                    totalIfCases ++;
                }               
            }
            
            if ((/\p{N}/u).test(password)){
                passwordStrengthCount ++;
                totalIfCases ++;
            } else {
                passwordReview.suggestions.push("Password should contain atleast 1 digit");
                totalIfCases ++;
            }
            // Matches spaces, punctuation, symbols, or emojis
            if (regexSplCharacters.test(password)){
                passwordStrengthCount ++;
                totalIfCases ++;
            } else {
                passwordReview.suggestions.push("Password should contain atleast 1 special character, space or an emoji");
                totalIfCases ++;
            }
            
            if (passwordStrengthCount >= 0 && passwordStrengthCount <= Math.floor(totalIfCases/2)){
                passwordReview.strength = "Weak";
            } else if (passwordStrengthCount > Math.floor(totalIfCases/2) && passwordStrengthCount < totalIfCases ){
                passwordReview.strength = "Medium";
            } else {
                passwordReview.strength = "Strong";
            }
            return passwordReview;
        }

        function updateStrength() {
            event.preventDefault(); // Prevent form from reloading the page
            var password = document.getElementById("password").value;
            var passwordLanguage = document.getElementById("password-language").value;
            var languageCaseSensitivity = document.getElementById("case-sensitive-input").value === "true";
            var strengthInfo = checkStrength(password, passwordLanguage, languageCaseSensitivity, 8, 15);
            var strengthText = `Strength: ${strengthInfo.strength}`;

            if (strengthInfo.suggestions.length > 0) {
                strengthText += `<br><strong>Suggestions:</strong><ul>`;
                strengthInfo.suggestions.forEach(suggestion => {
                    strengthText += `<li>${suggestion}</li>`;
                });
                strengthText += `</ul>`;
            }

            document.getElementById("strength").innerHTML = strengthText;
        }

    </script>
</body>
</html>
